"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[559],{5559:(e,a,t)=>{t.a(e,(async(e,s)=>{try{t.r(a),t.d(a,{default:()=>x});var l=t(9867),n=t(8339),r=t(6220),i=t(1357),o=t(2473),d=t(8182),c=t(6885),m=t(2834),u=e([n,i]);[n,i]=u.then?(await u)():u;const p=(0,c.T)("user");console.log(p);const x=()=>{const[e,a]=(0,l.useState)(!1),[t,s]=(0,l.useState)(""),[c,u]=(0,l.useState)([{}]),[x,h]=(0,l.useState)([]),[b,f]=(0,l.useState)([]),[g,y]=(0,l.useState)(!0),[v,j]=(0,l.useState)(!1),[N]=(0,l.useState)(10),[w,k]=(0,l.useState)(1),[_,C]=(0,l.useState)(null),[S,D]=(0,l.useState)(null),[F,z]=(0,l.useState)(!1),[Z,A]=(0,l.useState)(null);(0,l.useRef)();(0,l.useEffect)((()=>{y(!0),P()}),[w,!0===v]);const P=async()=>{const e=await i.Z.get("/company/?companyId=".concat(p.company_id,"&page=").concat(w,"&page_size=").concat(N));if(!1===(null===e||void 0===e?void 0:e.is_success)||!e)return alert(null===e||void 0===e?void 0:e.message);console.log(e),h(e),y(!1)},I=async()=>{const e={};try{const a=[],t=[{key:"organisation",file:Z.organizationChart,target:"organizationChartFileName"},{key:"company_file",file:Z.company_file,target:"companyFileFileName"}];for(const{key:s,file:l,target:n}of t){const t=i.Z.upload(s,l).then((a=>{console.log(a),e[n]=null===a||void 0===a?void 0:a.filename}));a.push(t)}await Promise.all(a)}catch(a){console.error(a)}return e};let E=[];if(!g&&x.data&&0!==x.data.rows.length){if(0===x.data.rows.length)return;E=x.data.rows.filter((e=>e))}const M=()=>{z(!1),C(null)};return(0,m.jsx)("div",{className:"flex justify-around h-full w-full bg-secondary p-5",children:(0,m.jsxs)("div",{className:"h-[90vh] w-[70%]   justify-around flex gap-2  p-5 bg-secondary",children:[(0,m.jsxs)("div",{id:"data",className:"flex  w-[150vh]  gap-2 h-full  flex-1 flex-col bg-secondary ".concat(e?"hidden":""),children:[F&&(0,m.jsx)(o.Z.DeleteModal,{handleCloseModal:M,handleConfirmDelete:async()=>{j(!0);await i.Z.delete("company/?company_id=".concat(_));j(!1),M()}}),(0,m.jsxs)("div",{className:"flex justify-between px-5 bg-primary p-3 ",children:[(0,m.jsxs)("div",{className:"rounded-md border dark:bg-gray-900",children:[(0,m.jsx)("label",{htmlFor:"table-search",className:"sr-only",children:"Search"}),(0,m.jsxs)("div",{className:"relative mt-1",children:[(0,m.jsx)("div",{className:"absolute inset-y-0 rtl:inset-r-0 start-0 flex items-center ps-3 pointer-events-none",children:(0,m.jsx)("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:(0,m.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),(0,m.jsx)("input",{type:"text",id:"table-search",className:"block ps-10 text-md text-gray-900 border border-secondary rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search for Company",value:t,onChange:e=>s(e.target.value)})]})]}),(0,m.jsx)("button",{onClick:()=>{a(!e)},children:e?"Cancel":"Register New"})]}),(0,m.jsx)("div",{className:"relative p-3 scrollbar overflow-x-auto overflow-y-auto h-full bg-primary",children:!g&&(0,m.jsx)(n.Z,{handleDelete:e=>{C(e),z(!0)},filteredSites:E})}),(0,m.jsxs)("div",{className:"h-[3rem] bg-primary flex flex-1 justify-between px-5 p-3 ",children:[!g&&(0,m.jsx)("button",{className:"underline",onClick:()=>w>1?k(w-1):"",children:"Prevous Page"}),!g&&(0,m.jsx)("button",{className:"underline",onClick:()=>x.data.count/N>w?k(w+1):"",children:"Next Page"})]})]}),(0,m.jsx)("div",{id:"table",className:"flex scrollbar overflow-y-scroll ".concat(e?"":"hidden"," bg-primary w-[50rem] p-5 rounded-lg"),children:(0,m.jsxs)("form",{onSubmit:e=>(async e=>{e.preventDefault(),j(!0);const t=await I(),s=Z;console.log(t),s.companyFieldData.organisation_structure=t.organizationChartFileName,s.companyFieldData.company_file=t.companyFileFileName,console.log(s);const l=await i.Z.post("/company",s);console.log(l),a(!1),j(!1)})(e),className:"w-[40rem] mx-auto m-5 gap-3 p-5",children:[e&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.Z,{submited:e,allFieldsData:e=>{e.company_file=S,A(e)},sites:c,handleInputChange:(e,a,t)=>{f({...b,[a]:t})},handleSiteInputChange:(e,a,t)=>{u((s=>s.map((s=>s.id===e?{...s,[a]:t}:s))))},removeSite:e=>{u((a=>a.filter((a=>a.id!==e))))},addNewSite:()=>{u((e=>[...e,{id:Date.now(),phone:"",company:""}]))}}),(0,m.jsx)(d.Z,{onFileSelect:e=>{D(e)},title:"Upload Company File"}),(0,m.jsx)("button",{type:"submit",className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800 mt-5",children:"Save"})]}),(0,m.jsx)("a",{onClick:()=>a(!1),href:"#",className:"text-white bg-orange-400 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800 mt-5",children:"Cancel"})]})})]})})};s()}catch(p){s(p)}}))},9217:(e,a,t)=>{t.d(a,{Z:()=>r});var s=t(9867),l=t(2834);const n=e=>{let{node:a}=e;const[t,n]=(0,s.useState)(!1);return(0,l.jsxs)("div",{className:"cursor-pointer px-3 w-[18rem]",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.department_name}),(0,l.jsx)("button",{className:"font-bold text-lg px-1 hover:border-2 h-7",onClick:t?()=>{n(!1),console.log(t)}:()=>{n(!0)},children:t?"X":"\u25bc"})]}),t&&(0,l.jsx)("div",{className:"ml-8 flex justify-between",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{children:["Department Name: ",a.department_name]}),(0,l.jsxs)("p",{children:["Resonsible Person: ",a.department_responsible_person]})]})}),(0,l.jsx)("div",{className:"mt-2",children:t&&(0,l.jsxs)("div",{className:"w-full flex items-center flex-row-reverse gap-3",children:[(0,l.jsx)("a",{href:"#",className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),(0,l.jsx)("a",{href:"#",className:"font-medium text-red-500 dark:text-blue-500 hover:underline",children:"Delete"})]})})]})},r=e=>{let{data:a}=e;return a.length>0&&(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)("div",{className:"-my-2 sm:-mx-6 lg:-mx-8",children:(0,l.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,l.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,l.jsx)("table",{className:"min-w-full divide-y divide-gray-200",children:(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((e=>(0,l.jsx)("tr",{children:(0,l.jsx)("td",{className:"px-1 py-1 whitespace-nowrap  hover:bg-gray-100",children:(0,l.jsx)(n,{node:e})})},e.id)))})})})})})})}},8754:(e,a,t)=>{t(9867),t(2653),t(2473),t(2834)},2473:(e,a,t)=>{t.d(a,{Z:()=>r});t(9867);var s=t(2653),l=t.n(s),n=t(2834);const r={DeleteModal:e=>{let{handleConfirmDelete:a,handleCloseModal:t}=e;return(0,n.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,n.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,n.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,n.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,n.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,n.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,n.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,n.jsx)("div",{className:"sm:flex sm:items-start",children:(0,n.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Confirm Deletion"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this item?"})})]})})}),(0,n.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,n.jsx)("button",{type:"button",onClick:a,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Confirm"}),(0,n.jsx)("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})},PreviewModal:e=>{let{handleDownloadFile:a,handleCloseModal:t,ext:s,path:r,file:i}=e;return(0,n.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,n.jsxs)("div",{className:"flex items-end justify-center min-h-screen h-40 pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,n.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,n.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:t})}),(0,n.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,n.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left shadow-xl transform transition-all sm:my-8 sm:align-middle w-[90vh]",children:[(0,n.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 !important",children:(0,n.jsx)(l(),{fileType:s,filePath:r})}),(0,n.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,n.jsx)("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"}),(0,n.jsx)("a",{href:"http://13.213.6.180:8009/milestone/api/v1/file/download/".concat(i),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Download"})]})]})]})})}}},6284:(e,a,t)=>{t.d(a,{Z:()=>r});var s=t(9867),l=t(2834);const n=e=>{let{node:a}=e;const[t,n]=(0,s.useState)(!1);return(0,l.jsxs)("div",{className:"cursor-pointer px-2 w-[18rem]",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.site_address}),(0,l.jsx)("button",{className:"font-bold text-lg px-1 hover:border-2 h-7",onClick:t?()=>{n(!1),console.log(t)}:()=>{n(!0)},children:t?"X":"\u25bc"})]}),t&&(0,l.jsx)("div",{className:"ml-12 flex justify-between",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{children:["Address: ",a.site_address]}),(0,l.jsxs)("p",{children:["Country: ",a.country]}),(0,l.jsxs)("p",{children:["State: ",a.site_state]}),(0,l.jsxs)("p",{children:["Suburb: ",a.site_suburb]}),(0,l.jsxs)("p",{children:["Contact Person: ",a.site_contact_person]}),(0,l.jsxs)("p",{children:["mobile: ",a.site_person_mobile]}),(0,l.jsxs)("p",{children:["Email: ",a.site_person_email]}),(0,l.jsxs)("p",{children:["Site Status: ",(0,l.jsx)("a",{className:"".concat("Inactive"===a.site_status?"text-red-500":"text-yellow-400"),children:a.site_status})]})]})}),(0,l.jsx)("div",{className:"mt-2",children:t&&(0,l.jsxs)("div",{className:"w-full flex items-center flex-row-reverse gap-3",children:[(0,l.jsx)("a",{href:"#",className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"Edit"}),(0,l.jsx)("a",{href:"#",className:"font-medium text-red-500 dark:text-blue-500 hover:underline",children:"Delete"})]})})]})},r=e=>{let{data:a}=e;return a.length>0&&(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)("div",{className:"-my-2 sm:-mx-6 lg:-mx-8",children:(0,l.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,l.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,l.jsx)("table",{className:"min-w-full divide-y divide-gray-200",children:(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((e=>(0,l.jsx)("tr",{children:(0,l.jsx)("td",{className:"px-1 py-1 whitespace-nowrap  hover:bg-gray-100",children:(0,l.jsx)(n,{node:e})})},e.id)))})})})})})})}},9466:(e,a,t)=>{t.a(e,(async(e,s)=>{try{t.d(a,{Z:()=>m});var l=t(9867),n=t(1357),r=t(9481),i=t(6220),o=(t(3677),t(2834)),d=e([n]);function m(e){let{data:a,closeModal:t,updateData:s}=e;const[d,c]=(0,l.useState)([]);return(0,o.jsx)(r.Z,{children:(0,o.jsx)("form",{onSubmit:e=>(async e=>{e.preventDefault(),console.log("submit",{...d,...a});const t=d;if(!t.companyFieldData)return alert("no data updated");const s=await n.Z.put("/company/?company_id=".concat(a.company_id),t);if(null===s||void 0===s||!s.is_success)return alert(s.message);alert(s.message)})(e),children:(0,o.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,o.jsxs)("div",{className:"flex items-end justify-center min-h-screen h-40 pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,o.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,o.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,o.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left shadow-xl transform transition-all sm:my-8 sm:align-middle w-[70vh]",children:[(0,o.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 !important",children:(0,o.jsxs)("div",{className:"border p-4",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Update Company Details"}),(0,o.jsx)(i.Z,{isUpdate:!0,companyData:a,allFieldsData:e=>{c(e)}})]})}),(0,o.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,o.jsx)("button",{type:"button",onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"bg-blue-500 text-white p-2 rounded",children:"Saves"})]})]})]})})})})}n=(d.then?(await d)():d)[0],s()}catch(c){s(c)}}))},8182:(e,a,t)=>{t.d(a,{Z:()=>r});var s=t(9867),l=t(625),n=t(2834);const r=(0,s.forwardRef)(((e,a)=>{const[t,r]=(0,s.useState)(null),i=async e=>{if(t){const s=new FormData;s.append("file",t);const n={method:"post",maxBodyLength:1/0,url:"http://13.213.6.180:8009/milestone/api/v1/file/upload/".concat(e),headers:{"Content-Type":"multipart/form-data"},data:s};try{return(await l.Z.request(n)).data}catch(a){}}};return(0,s.useImperativeHandle)(a,(()=>({handleSaveClick:i}))),(0,n.jsxs)("div",{className:"flex-col gap-1 flex",children:[(0,n.jsx)("label",{children:e.title}),(0,n.jsx)("input",{type:"file",required:e.required,className:"bg-yellow-200",onChange:a=>{r(null);const t=a.target.files[0];if(t){["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(t.type)?(r(t),e.onFileSelect(t)):(alert("Please select a valid file type (PDF or DOCX)"),a.target.value=null)}}})]})}))},8339:(e,a,t)=>{t.a(e,(async(e,s)=>{try{t.d(a,{Z:()=>c});var l=t(9867),n=t(6284),r=(t(8754),t(9466)),i=t(9217),o=t(2834),d=e([r]);r=(d.then?(await d)():d)[0];const c=e=>{let{filteredSites:a,handleDelete:t}=e;const[s,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)({});console.log(a);return(0,o.jsxs)("div",{className:"shadow-md sm:rounded-lg",children:[s&&c&&(0,o.jsx)(r.Z,{data:c,closeModal:()=>{d(!1)}}),(0,o.jsxs)("table",{className:"w-full  text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[(0,o.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{}),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Sites"},"sites"),(0,o.jsx)("th",{scope:"col",className:"px-6 py-3",children:"Department"},"division"),a.length>0&&Object.keys(a[0]).filter((e=>!["id","sites","created_at","updated_at","company_id","division"].includes(e))).map((e=>(0,o.jsx)("th",{scope:"col",className:"px-6 py-3",children:e},e)))]})}),(0,o.jsx)("tbody",{className:"  h-[100%] ",children:a.length>0&&a.map((e=>(0,o.jsxs)("tr",{className:"  bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-200 cursor-pointer dark:hover:bg-gray-600",children:[(0,o.jsxs)("td",{className:"flex flex-col px-6 py-4 gap-2 items-center  justify-center",children:[(0,o.jsx)("a",{onClick:()=>(m(e),void d(!0)),href:"#",className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",children:"\u270e"}),(0,o.jsx)("a",{onClick:()=>t(e.company_id),href:"#",className:"font-medium text-red-500 dark:text-blue-500 hover:underline",children:"\ud83d\uddd1\ufe0f"})]}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap ",children:(0,o.jsx)(n.Z,{data:e.sites})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap ",children:(0,o.jsx)(i.Z,{data:e.division})}),Object.keys(a[0]).filter((e=>!["id","organisation_structure","company_file","sites","created_at","updated_at","company_id","division"].includes(e))).map((a=>(0,o.jsx)("td",{className:"px-6 py-4",children:e[a]},e[a]))),(0,o.jsx)("td",{className:"px-6 py-4 text-textPrimary hover:underline",children:(0,o.jsx)("a",{target:"_blank",href:"http://13.213.6.180:8009/milestone/api/v1/file/read/".concat(e.organisation_structure,"?docType=organisation"),rel:"noreferrer",children:e.organisation_structure})},"organization_structure"),(0,o.jsx)("td",{className:"px-6 py-4 text-textPrimary hover:underline",children:(0,o.jsx)("a",{target:"_blank",href:"http://13.213.6.180:8009/milestone/api/v1/file/read/".concat(e.company_file,"?docType=company_file"),rel:"noreferrer",children:e.company_file})},"company_file")]},e.id)))})]})]})};s()}catch(c){s(c)}}))},3677:(e,a,t)=>{t.d(a,{Z:()=>n});var s=t(9867),l=t(2834);const n=e=>{let{sites:a,isUpdate:t,onValuesChange:n}=e;const r=[{name:"site_address",label:"Site address",value:""},{name:"country",label:"Country",value:""},{name:"site_state",label:"State",value:""},{name:"site_suburb",label:"Suburb",value:""},{name:"site_contact_person",label:"Contact Person Name",value:""},{name:"site_person_mobile",label:"Contact Person Mobile",value:"",type:"number"},{name:"site_person_email",label:"Contact Person Email",value:""},{name:"site_status",label:"Status",value:"Inactive",options:[{name:"Active"},{name:"Inactive"}]}],[i,o]=(0,s.useState)([{id:1,fields:r}]),[d,c]=(0,s.useState)(2);(0,s.useEffect)((()=>{if(!0===t){console.log(a);const e=[];a.forEach(((a,t)=>{const s=r;s.forEach((e=>{e.value=a[e.name]})),e.push({id:t,fields:s}),c((e=>e+1))})),console.log(e),o(e),u()}}),[t]);const m=function(e,a,t){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text";console.log("type",s),("number"!==s||/^[0-9]*$/.test(t))&&(o((s=>s.map((s=>s.id===e?{...s,fields:s.fields.map((e=>e.name===a?{...e,value:t}:e))}:s)))),u())},u=()=>{const e=i.reduce(((e,a)=>({...e,[a.id]:a.fields})),{});n(e)};return(0,l.jsxs)("div",{className:"flex flex-col gap-1  bg-secondary border-2 p-1",children:[i.map(((e,a)=>{let{id:t,fields:s}=e;return(0,l.jsx)("div",{className:"grid md:grid-cols-1 md:gap-6 mt-5",children:(0,l.jsxs)("div",{className:"relative z-0 w-full pb-4 group bg-primary p-5",children:[(0,l.jsxs)("div",{className:"flex justify-between pb-4",children:[(0,l.jsxs)("h1",{children:["Site ",a+1]}),a>0&&(0,l.jsx)("button",{className:"bg-red-500 hover:bg-accent text-primary hover:text-textPrimary border rounded-md px-[20px] py-[5px] ",onClick:()=>{return e=t,o((a=>a.filter((a=>a.id!==e)))),void u();var e},children:"Remove"})]}),(0,l.jsx)("div",{className:"flex-col grid md:grid-cols-2 md:gap-6",children:s.map((e=>(0,l.jsx)("div",{className:"mb-4 relative z-0",children:e.options?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{htmlFor:e.name,className:"absolute text-sm text-textAccent dark:text-green-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto",children:e.label}),(0,l.jsx)("select",{id:e.name,value:e.value,onChange:a=>m(t,e.name,a.target.value,e.type),className:"mt-1 p-2 border rounded w-full",required:!0,children:e.options.map((e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.name)))})]}):(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"relative z-0",children:[(0,l.jsx)("input",{value:e.value,onChange:a=>m(t,e.name,a.target.value,e.type),type:"text",id:e.name,"aria-describedby":"standard_success_help",className:"block py-2.5 px-0 w-full text-sm text-textAccent bg-transparent border-0 border-b-2 border-textAccent appearance-none dark:text-white dark:border-green-500 dark:focus:border-green-500 focus:outline-none focus:ring-0 peer",placeholder:" "}),(0,l.jsx)("label",{htmlFor:e.name,className:"absolute text-sm text-textAccent dark:text-green-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto",children:e.label})]})})},e.name)))})]})},t)})),(0,l.jsx)("a",{className:"bg-secondary hover:bg-accent text-gray-600 hover:text-textPrimary border rounded-md px-[20px] py-[5px] w-[120px] cursor-pointer",onClick:()=>{o((e=>[...e,{id:d,fields:r}])),c((e=>e+1)),u()},children:"New Site"})]})}},6220:(e,a,t)=>{t.d(a,{Z:()=>c});var s=t(9867),l=t(3677),n=t(2834);const r=e=>{let{isUpdate:a,divisionData:t,onValuesChange:l}=e;const r=[{name:"department_name",label:"Department",value:""},{name:"department_responsible_person",label:"Department Responsible person",value:""},{name:"staff",label:"Department Number of Staff",value:"",type:"number"}],[i,o]=(0,s.useState)([{id:1,fields:r}]),[d,c]=(0,s.useState)(2),m=function(e,a,t){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text";console.log("type",s),("number"!==s||/^[0-9]*$/.test(t))&&(o((s=>s.map((s=>s.id===e?{...s,fields:s.fields.map((e=>e.name===a?{...e,value:t}:e))}:s)))),u())};(0,s.useEffect)((()=>{if(!0===a){let e=[];t.forEach(((a,s)=>{console.log(t),console.log(r);const l=[...r];l.forEach((e=>{e.value=a[e.name]})),e=[...e,{id:s,fields:l}],console.log("fields",l),console.log("divdata ".concat(s),e),c((e=>e+1))})),o(e),console.log(i),u()}}),[]);const u=()=>{const e=i.reduce(((e,a)=>({...e,[a.id]:a.fields})),{});l(e)};return(0,n.jsxs)("div",{className:"flex flex-col gap-1  bg-secondary border-2 p-1",children:[i.map(((e,a)=>{let{id:t,fields:s}=e;return(0,n.jsx)("div",{className:"grid md:grid-cols-1 md:gap-6 mt-5  ",children:(0,n.jsxs)("div",{className:"relative z-0 w-full pb-4 group bg-primary p-5",children:[(0,n.jsxs)("div",{className:"flex justify-between pb-4",children:[(0,n.jsxs)("h1",{children:["Department ",a+1]}),a>0&&(0,n.jsx)("button",{className:"bg-red-500 hover:bg-accent text-primary hover:text-textPrimary border rounded-md px-[20px] py-[5px] ",onClick:()=>{return e=t,o((a=>a.filter((a=>a.id!==e)))),void u();var e},children:"Remove"})]}),(0,n.jsx)("div",{className:"",children:s.map((e=>(0,n.jsx)("div",{className:"mb-4 relative z-0",children:e.options?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:e.name,className:"absolute text-sm text-textAccent dark:text-green-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto",children:e.label}),(0,n.jsx)("select",{id:e.name,value:e.value,onChange:a=>m(t,e.name,a.target.value,e.type),className:"mt-1 p-2 border rounded w-full",required:!0,children:e.options.map((e=>(0,n.jsx)("option",{value:e.name,children:e.name},e.name)))})]}):(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"relative z-0",children:[(0,n.jsx)("input",{value:e.value,onChange:a=>m(t,e.name,a.target.value,e.type),type:"text",id:e.name,"aria-describedby":"standard_success_help",className:"block py-2.5 px-0 w-full text-sm text-textAccent bg-transparent border-0 border-b-2 border-textAccent appearance-none dark:text-white dark:border-green-500 dark:focus:border-green-500 focus:outline-none focus:ring-0 peer",placeholder:" "}),(0,n.jsx)("label",{htmlFor:e.name,className:"absolute text-sm text-textAccent dark:text-green-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto",children:e.label})]})})},e.name)))})]})},t)})),(0,n.jsx)("a",{className:"bg-secondary hover:bg-accent text-gray-600 hover:text-textPrimary border rounded-md px-[20px] py-[5px] w-[135px] cursor-pointer",onClick:()=>{o((e=>[...e,{id:d,fields:r}])),c((e=>e+1))},children:"New Division"})]})};var i=t(8182);const o=e=>{let{id:a,label:t,checked:s,onChange:l}=e;return(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",id:a,className:"form-checkbox h-5 w-5 text-indigo-600",checked:s,onChange:l}),(0,n.jsx)("label",{htmlFor:a,className:"ml-2",children:t})]})},d=e=>{let{options:a,onCheckboxChange:t}=e;const l=a.reduce(((e,a)=>(e[a.id]=!1,e)),{}),[r,i]=(0,s.useState)(l);(0,s.useEffect)((()=>{t(r)}),[r]);return(0,n.jsx)("div",{children:a.map((e=>(0,n.jsx)(o,{id:e.id,label:e.label,checked:r[e.id],onChange:()=>{return a=e.id,void i((e=>({...e,[a]:!e[a]})));var a}},e.id)))})},c=e=>{let{companyData:a,submited:t,isUpdate:o,handleSiteInputChange:c,removeSite:m,allFieldsData:u,companyFormData:p}=e;const x=[{name:"company_organization",label:"Organisation name",value:""},{name:"company_type_of_business",label:"Type of business",value:""},{name:"company_text_file_number",label:"Tax file number",value:""},{name:"company_acn_number",label:"ACN number",value:"",type:"number"},{name:"company_communication_address",label:"Communication Address ",value:""},{name:"company_country",label:"Country",value:""},{name:"company_state",label:"State",value:""},{name:"company_suburb",label:"Suburb",value:""},{name:"contact_person_name",label:"Contact person name",value:""},{name:"contact_person_mobile_no",label:"Contact person mobile no",value:"",type:"number"},{name:"contact_person_email",label:"Contact person email",value:""},{name:"timezone",label:"Timezone",value:""},{name:"domain",label:"Domain",value:"No",options:[{name:"No"},{name:"Yes"}]},{name:"account_creation_date",label:"Account creation date",value:(new Date).toISOString().split("T")[0],type:"date"},{name:"account_expiry_date",label:"Account expiry date",value:"",type:"date"},{name:"information_security_framework",label:"Information Security Framework / Products",value:"ISO/IEC 27001",options:[{name:"ISO/IEC 27001"},{name:" ISO 9001"},{name:" ISO 14001"},{name:"NIST"},{name:"SOC"},{name:"CSA"}]},{name:"license_allocated",label:"License allocated",value:"No license",options:[{name:"No license"},{name:"demo license"},{name:"0-5"},{name:"5-15"},{name:"15-30"},{name:"30-60"},{name:"60-120"},{name:"120-240"},{name:"240-480"},{name:"480-700"},{name:"700-1000"},{name:"1000 and above"}]}],[h,b]=(0,s.useState)([{}]);(0,s.useEffect)((()=>{if(b(x),console.log(o),!0===o){console.log(x),console.log(a),x.forEach((e=>{e.value=a[e.name]})),b(x);const e=x.reduce(((e,a)=>({...e,[a.name]:a.value})),{});N(e);const t={siteFieldData:f,companyFieldData:e,selectedCheckboxes:w,organizationChart:_,divisionFieldData:y};console.log("update filedsasd",t),u(t)}}),[t]);const[f,g]=(0,s.useState)({}),[y,v]=(0,s.useState)({}),[j,N]=(0,s.useState)({}),[w,k]=(0,s.useState)({}),[_,C]=(0,s.useState)(null),S=async(e,a,t)=>{if(console.log("type",t),"number"===t&&!/^[0-9]*$/.test(a))return;const s=h.findIndex((a=>a.name===e)),l=[...h];l[s].value=a,b(l),await D()},D=async()=>{if(!h)return;const e=await h.reduce(((e,a)=>({...e,[a.name]:a.value})),{});N(e),console.log("mapped",e);const a={siteFieldData:f,companyFieldData:e,selectedCheckboxes:w,organizationChart:_,divisionFieldData:y};console.log("update fileds",a),u(a)};return(0,n.jsxs)("div",{className:"w-full gap-5 flex flex-col",children:[(0,n.jsx)("h1",{children:o?"":"Create New Company"}),(0,n.jsx)("div",{className:"grid md:grid-cols-2 md:gap-6",children:h.length>0&&h.map((e=>(0,n.jsx)("div",{className:"mb-4 relative z-0",children:e.options?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:e.type,className:"absolute text-sm text-gray-600 dark:text-green-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto",children:e.label}),(0,n.jsx)("select",{id:e.name,value:e.value,onChange:a=>S(e.name,a.target.value,e.type),className:"mt-1 p-2 border rounded w-full bg-secondary",required:!0,children:e.options.map((e=>(0,n.jsx)("option",{value:e.name,children:e.name},e.name)))})]}):(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"relative z-0",children:[(0,n.jsx)("input",{value:e.value,onChange:a=>S(e.name,a.target.value,e.type),type:"date"!==e.type?"text":"date","aria-describedby":"standard_success_help",className:"block py-2.5 px-0 w-full text-sm text-textAccent bg-transparent border-0 border-b-2 border-textAccent appearance-none dark:text-white dark:border-green-500 dark:focus:border-green-500 focus:outline-none focus:ring-0 peer",placeholder:" ",required:!0}),(0,n.jsx)("label",{htmlFor:e.name,className:"absolute text-sm text-gray-600 dark:text-green-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto",children:e.label})]})})},e.name)))}),!o&&(0,n.jsx)(l.Z,{sites:null===a||void 0===a?void 0:a.sites,isUpdate:o,onValuesChange:async e=>{const a=Object.keys(e).map((a=>e[a].reduce(((e,a)=>({...e,[a.name]:a.value})),{})));g(a),D()}}),!o&&(0,n.jsx)(r,{divisionData:null===a||void 0===a?void 0:a.division,isUpdate:o,onValuesChange:async e=>{const a=Object.keys(e).map((a=>e[a].reduce(((e,a)=>({...e,[a.name]:a.value})),{})));v(a),D()}}),!o&&(0,n.jsx)("div",{className:"mb-4 relative z-0 grid md:grid-cols-2 md:gap-6 border-2 p-5",children:(0,n.jsx)("div",{className:"relative z-0",children:(0,n.jsx)(i.Z,{onFileSelect:e=>{console.log(e),C(e)},required:!0,title:"Organization Structure"})})}),!o&&(0,n.jsx)("div",{className:"mb-4 relative z-0 grid md:grid-cols-2 md:gap-6 border-2 p-5",children:(0,n.jsx)("div",{className:"gap-2 flex",children:(0,n.jsxs)("div",{className:"container mx-auto p-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Module Assigned"}),(0,n.jsx)(d,{title:"",options:[{id:"Module_1",label:"Module 1"},{id:"Module_2",label:"Module 2"},{id:"module_3",label:"module 3"}],onCheckboxChange:e=>{k(e),D()}})]})})})]})}}}]);
//# sourceMappingURL=559.c4c71ecb.chunk.js.map